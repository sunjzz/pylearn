!function(){var a=navigator.userAgent.toLowerCase();var d=/iphone/i.test(a);var c=/android/i.test(a);var b=location.pathname;if(frompc&&(d||c)){if(b.indexOf("/video/")==0){location.href=location.href.replace(/\/video\//,"/wap/video/")}else{if(b.indexOf("/playlist/")==0){location.href=location.href.replace(/\/playlist\//,"/wap/playlist/")}}}}();var userId=0;var isPermanentUser=false;var messageOverrides="";var isEmailVerified;var YYT={},Y={};Y.user=Y.user||{};if(typeof Object.merge==="undefined"){Browser.ie=Browser.Engine.trident;Browser.ie6=Browser.Engine.trident4;Object.merge=$merge;Object.append=$extend}var ie=Browser.ie;In.config("serial",true);var cache={boxes:{}};var searchKeyHint="";In.add("form",{path:urlStatic+"/js/common/widget/ajaxForm.$48652.js",type:"js"});In.add("humanmessage",{path:urlStatic+"/js/common/widget/humanmessage.$44511.js",type:"js"});In.add("mbox-css",{path:urlStatic+"/css/common/widget/mbox.$51492.css",type:"css"});In.add("mbox",{path:urlStatic+"/js/common/widget/mbox.$52815.js",type:"js",rely:["mbox-css"]});In.add("suggest-css",{path:urlStatic+"/css/common/widget/suggest.$36131.css",type:"css"});In.add("suggest",{path:urlStatic+"/js/common/widget/suggest.$53578.js",type:"js",rely:["suggest-css"]});In.add("overlay-css",{path:urlStatic+"/css/common/widget/overlay.$36131.css",type:"css"});In.add("overlay",{path:urlStatic+"/js/common/widget/overlay.$41425.js",type:"js",rely:["overlay-css"]});In.add("tips-css",{path:urlStatic+"/css/common/widget/tips.$44511.css",type:"css"});In.add("tips",{path:urlStatic+"/js/common/widget/tips.$37563.js",type:"js",rely:["tips-css"]});In.add("juicer",{path:urlStatic+"/js/common/widget/juicer.$43155.js",type:"js"});Y.partner={iframes:{},getCode:function(placeIds,callback){if(typeof placeIds=="string"){placeIds=[placeIds]}new Request.JSON({url:"/partner/get-partner-code",method:"get",data:"placeIds="+placeIds.join(","),onSuccess:function(data){if(data&&!data.error){if(callback){callback(data)}else{placeIds.each(function(item){var con=data[item];if(con){if(con.contains("loadFlash")){eval("("+con+")")}else{var oItem=$(item);oItem&&oItem.set("html",con)}}})}}}}).send()},loadIframe:function(a,d,b){if(!b){return}b=Math.ceil(Math.random()*b);var c=this;if(b==1){setTimeout(function(){if(c.iframes[a]&&c.iframes[a].contentWindow.document){c.iframes[a].contentWindow.document.location.reload()}else{var e=new Element("iframe",{src:a,styles:{width:1,height:1,overflow:"hidden",position:"absolute",top:"-10px"},events:{load:function(){c.iframes[a]=e}}}).inject($("footer"))}},d*1000)}},loadEnabled:(function(){var a=true;try{if(window.parent!=window.self){a=false}}catch(b){}return a})()};(function(a){a.cache=a.cache||{};var b={returntop:{css:urlStatic+"/css/common/widget/returntop.$49789.css",js:urlStatic+"/js/common/widget/returntop.$49242.js"},feedback:{css:urlStatic+"/css/common/widget/modal/feedback.$44511.css",js:urlStatic+"/js/common/widget/modal/feedback.$36148.js"},report:{css:urlStatic+"/css/common/widget/modal/report.$44511.css",js:urlStatic+"/js/common/widget/modal/report.$49095.js"},pl_daren:{css:urlStatic+"/css/common/widget/card/playlist_daren.$44511.css",js:urlStatic+"/js/common/widget/card/playlist_daren.$47758.js"},fancard:{css:urlStatic+"/css/common/widget/card/fancard.$44511.css",js:urlStatic+"/js/common/widget/card/fancard.$48390.js",rely:["juicer"]},comment:{css:urlStatic+"/css/common/widget/comment.$48572.css",js:urlStatic+"/js/common/widget/comment.$48566.js"},usercard:{css:urlStatic+"/css/common/widget/card.$50782.css",js:urlStatic+"/js/common/widget/card.$51797.js",rely:["juicer"]},attention:{js:urlStatic+"/js/common/widget/form/autoComplete.$54834.js",rely:["juicer"]},pcpusher:{css:urlStatic+"/css/common/widget/pcpusher.$53735.css",js:urlStatic+"/js/common/widget/pcpusher.$53739.js"}};a.widget={load:function(e,d){if(!Y.partner.loadEnabled){return}var c=b[e].rely||[];if(b[e].css){In.add(e+"-css",{path:b[e].css,type:"css"});c.include(e+"-css")}In.add(e,{path:b[e].js,type:"js",rely:c});In.ready(e,function(){d&&d()})},returnTop:function(){this.load("returntop",function(){a.returnTop()})},pcpush:function(){},showAdviceDialog:function(){this.load("feedback",function(){a.showAdviceDialog()})},report:function(f,e,d,c){this.load("report",function(){showReportBox(f,e,d,c)})},pl_daren:function(c){},fancard:function(c){this.load("fancard",function(){fancard(c)})},comment:function(d){a.cache.commentLoaded=false;login.callbacks.push(c);function c(){if(!a.cache.commentLoaded){setTimeout(c,40);return}commentLoginCallback()}this.load("comment",function(){new Request.JSONP({url:d.get.html,method:"get",evalScripts:false,onSuccess:function(e){$("comment").set("html",e.html);initComment(d);showReply(d.commentType.value,d.commentType.type)}}).send()})},usercard:function(c){this.load("usercard",function(){usercard.init(c)})},writingAuthCode:function(d,c){document.addEvent("focus:relay("+d+")",function(g,h){if(Y.user.isUseWritingAuthCode){var f=['<div class="writingAuthCode">',"<span>验证码 :</span>",'<label><input type="text" value="" name="vercode" id="vercode" class="vercode"/></label>','<img class="authCode" src="/writing/auth-code-image?t='+Date.now()+'" alt="验证码"/>',"<span class=\"vCodeUpdate\" onclick=\"$$('.authCode').set('src', '/writing/auth-code-image?' + Date.now());\">刷新</span>","</div>"].join("");var e=c(h);if(!e||e.getElement(".writingAuthCode")){return}e.innerHTML=f}})},attention:function(c){this.load("attention",function(){Y.at(c)})}}})(YYT);var mbox={show:function(c,b,a,e){if(cache.boxes[c]){cache.boxes[c].show();return cache.boxes[c]}var d=Object.append(e,{title:b});In("mbox",function(){cache.boxes[c]=new MBox(a,d);cache.boxes[c].show()});return cache.boxes[c]},showAjax:function(c,b,a,e){if(cache.boxes[c]){cache.boxes[c].show();return cache.boxes[c]}var d=Object.append(e,{title:b});In("mbox",function(){cache.boxes[c]=new MBox(a,d);cache.boxes[c].show()});return cache.boxes[c]}};var ajaxForm={init:function(b,a){In("form",function(){new AjaxForm(b,a)})}};Y.isCommonGeetest=false;var commonLoginGeetest,errorInfoDiv;function refreshCommonGeetest(){commonLoginGeetest.refresh();Y.isCommonGeetest=false}var login={callbacks:[],notloginCallbacks:[],popupLogin:function(f,j){f=f||function(){};if(userId){f&&f();return false}var d=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var e=/^[+-]?[1-9][0-9]*(\.[0-9]+)?([eE][+-][1-9][0-9]*)?$|^[+-]?0?\.[0-9]+([eE][+-][1-9][0-9]*)?$/;var h=Object.merge({title:"",width:664,height:342},j);var c=("popupLogin"+f.toString()+h.toString()).toSHA1();var a=new Request({url:"/ajax/login-form-new",method:"get"});login.prepareCallback(f,c);mbox.showAjax(c,h.title,a,{width:h.width,height:h.height,className:"popup_login",onInit:function(l){loginapi_js(l);var k=l.getElement("form");b(k)},onHide:function(l){if(h.hideCallback){h.hideCallback()}var k=l.getElement("form");k.getElement(".errorinfo").setStyle("visibility","hidden");k.getElement("[name=email]").getParent().removeClass("emailerror").removeClass("error");k.getElement("[name=password]").getParent().removeClass("emailerror").removeClass("error");setTimeout(function(){refreshCommonGeetest()},500)}});function b(m){if(!commonLoginGeetest){commonLoginGeetest=new window.Geetest({gt:"cc34bd7df5c42f7d9c3f540fdfb671cf",product:"float"});commonLoginGeetest.appendTo(".popup_login #captcha");commonLoginGeetest.onSuccess(function(){Y.isCommonGeetest=true;if(errorInfoDiv.get("text")=="拖动滑块完成验证"){errorInfoDiv.setStyle("visibility","hidden")}})}var n,l,k;n=m.getElement(".errorinfo");l=m.getElement("[name=email]");k=m.getElement(".pwd");errorInfoDiv=n;g(l);g(k);ajaxForm.init(m,{useJSONP:true,onRequest:function(){if(!i(l,k,n)){return false}if(!Y.isCommonGeetest){var o="拖动滑块完成验证";n.set("text",o).setStyle("visibility","visible");return false}var r=l.value.trim()+k.value.trim();attachYytForm(m,r);try{var p=yytcrypt(k.value.trim());if(!m.encpsw){new Element("input",{type:"hidden",name:"encpsw",value:p}).inject(m)}m.encpsw.set("value",p);m.password.set("value","")}catch(q){}return true},onComplete:function(o){if(!o.error){login.loginComplete(o);Y.rdaq.call(function(){Y.rdaq.login(o.userId)})}else{refreshCommonGeetest();n.set("text",o.message).setStyle("visibility","visible")}}})}function i(n,m,l){var k,o;k=n.value.trim();o=m.value.trim();if(k.length===0){l.set("text","邮箱或手机不能为空").setStyle("visibility","visible");n.getParent().addClass("emailerror");return false}if(!d.test(k)){if(e.test(k)){if(k.length!==11){l.set("text","请输入正确的电子邮箱或手机").setStyle("visibility","visible");n.getParent().addClass("emailerror");return false}}else{l.set("text","请输入正确的电子邮箱或手机").setStyle("visibility","visible");n.getParent().addClass("emailerror");return false}}if(o.length===0){l.set("text","密码不能为空").setStyle("visibility","visible");m.getParent().addClass("error");return false}if(o.length<4||o.length>20){l.set("text","密码长度必须大于4且小于20").setStyle("visibility","visible");m.getParent().addClass("error");return false}return true}function g(k){if(k.get("name")==="email"){k.addEvents({focus:function(){this.getParent().addClass("emailfocus").removeClass("emailerror")},blur:function(){this.getParent().removeClass("emailfocus")}})}else{k.addEvents({focus:function(){this.getParent().addClass("focus").removeClass("error")},blur:function(){this.getParent().removeClass("focus")}})}}},refreshLoginInfo:function(){var a=Cookie.read("yinyuetai_email");var b=Cookie.read("token");if(b==null||b.length==0){b=Cookie.read("token2")}if((a==null||a.length==0)&&(b==null||b.length==0)){login.loginComplete({userId:0});return false}if(userId>0){return true}new Request.JSONP({url:loginSite+"/login-info",method:"get",onSuccess:function(c){if(!c.error){login.loginComplete(c)}}.bind(this)}).send()},loginComplete:function(a){var b,d,c;if(a.userId!=0){if(a.platFormRef){location.href="http://login.yinyuetai.com/platform";return}userId=a.userId;Y.user=a;Y.user.isUseWritingAuthCode=a.isUseWritingAuthCode;if(a.isPermanentUser){isPermanentUser=a.isPermanentUser}isEmailVerified=a.isEmailVerified;if(login.callbacks&&login.callbacks.length>0){b=login.callbacks.length;for(d=0;d<b;d++){c=login.callbacks.shift();c(a)}}if(login.callonceCallbacks&&login.callonceCallbacks.length>0){b=login.callonceCallbacks.length;for(d=0;d<b;d++){c=login.callonceCallbacks.shift();c(a)}}}else{if(login.notloginCallbacks&&login.notloginCallbacks.length>0){b=login.notloginCallbacks.length;for(d=0;d<b;d++){c=login.notloginCallbacks.shift();c()}}}},logout:function(){},prepareCallback:function(b,a){login.callonceCallbacks.empty();login.callonceCallbacks.push(function(){cache.boxes[a].hide()});if(b){login.callonceCallbacks.push(b)}},callonceCallbacks:[]};Y.getImageServerUrl=function(f){try{if(f==null||f==""){return"http://img1.yytcdn.com/default404.jpg"}if(f.indexOf("http")==0){return f}var h=f.lastIndexOf("/");var e=f.lastIndexOf(".");if(h<0||e<0){return f}var c=f.substring(h+1,e);if(c.length>8){var a=c.substring(0,4);var b=c.substring(c.length-4);c=a+b}var d=parseInt(c,36)%5;return"http://img"+d+".yytcdn.com"+f}catch(g){return f}};Array.implement({explode:function(b){var a="";this.each(function(d,c){if(c>0){a+=b}a+=d.toString()});return a}});(function(){var c={rotateLeft:function(e,d){return(e<<d)|(e>>>(32-d))},hex:function(d){var g,e,f="";for(g=7;g>=0;g--){e=(d>>>(g*4))&15;f+=e.toString(16)}return f}};function b(d){var h,g,f="",e=String.fromCharCode;for(h=0;g=d.charCodeAt(h);h++){if(g<128){f+=e(g)}else{if((g>127)&&(g<2048)){f+=e((g>>6)|192);f+=e((g&63)|128)}else{f+=e((g>>12)|224);f+=e(((g>>6)&63)|128);f+=e((g&63)|128)}}}return f}function a(d){var v,u,t,o=1732584193,n=4023233417,m=2562383102,k=271733878,j=3285377520,f,s,r,q,p;d=b(d);var g=d.length,h=new Array(),l=new Array(80),e=function(w){return d.charCodeAt(w)},i=function(w){p=q;q=r;r=c.rotateLeft(s,30);s=f;f=w};for(v=0;v<g-3;v+=4){u=e(v)<<24|e(v+1)<<16|e(v+2)<<8|e(v+3);h.push(u)}switch(g%4){case 0:v=2147483648;break;case 1:v=e(g-1)<<24|8388608;break;case 2:v=e(g-2)<<24|e(g-1)<<16|32768;break;case 3:v=e(g-3)<<24|e(g-2)<<16|e(g-1)<<8|128;break}h.push(v);while((h.length%16)!=14){h.push(0)}h.push(g>>>29);h.push((g<<3)&4294967295);for(t=0;t<h.length;t+=16){for(v=0;v<16;v++){l[v]=h[t+v]}for(v=16;v<=79;v++){l[v]=c.rotateLeft(l[v-3]^l[v-8]^l[v-14]^l[v-16],1)}f=o;s=n;r=m;q=k;p=j;for(v=0;v<=19;v++){i((c.rotateLeft(f,5)+((s&r)|(~s&q))+p+l[v]+1518500249)&4294967295)}for(v=20;v<=39;v++){i((c.rotateLeft(f,5)+(s^r^q)+p+l[v]+1859775393)&4294967295)}for(v=40;v<=59;v++){i((c.rotateLeft(f,5)+((s&r)|(s&q)|(r&q))+p+l[v]+2400959708)&4294967295)}for(v=60;v<=79;v++){i((c.rotateLeft(f,5)+(s^r^q)+p+l[v]+3395469782)&4294967295)}o=(o+f)&4294967295;n=(n+s)&4294967295;m=(m+r)&4294967295;k=(k+q)&4294967295;j=(j+p)&4294967295}return(c.hex(o)+c.hex(n)+c.hex(m)+c.hex(k)+c.hex(j)).toLowerCase()}String.implement({toUTF8:function(){return b(this)},toSHA1:function(){return a(this)}})})();var topbar={links:[{info:{src:"",className:"topBarAvatar",text:"",link:homeSite},links:[{link:homeSite+"/settings/avatar",className:"icon_avatar",text:"修改头像"},{link:homeSite+"/settings/profile",className:"icon_userInfo",text:"修改个人资料"},{link:homeSite+"/settings/password",className:"icon_userPassword",text:"修改密码"}]},{info:{className:"icon_newMsg",text:"",link:"javascript:void(0)"},links:[{link:homeSite+"/news/private",className:"icon_inbox",text:"站内信"},{link:homeSite+"/news/attention",className:"icon_inbox",text:"@我"},{link:homeSite+"/news/comment",className:"icon_inbox",text:"评论"},{link:homeSite+"/news/balls",className:"icon_information",text:"饭团消息"},{link:homeSite+"/news/bulletin",className:"icon_announcement",text:"站内公告"},{link:homeSite+"/news/system",className:"icon_notice",text:"系统提醒"}]},{info:{text:"我的",link:homeSite},links:[{link:homeSite+"/{userId}?preview",className:"icon_home",text:"<strong>我的展示页</strong>"},{link:homeSite+"/i/blog/write",className:"icon_blog",text:"发表日志"},{link:homeSite+"/{userId}/album",className:"icon_photoUpload",text:"上传照片"},{link:homeSite+"/{userId}/fan",className:"icon_group",text:"我的饭团"},{link:homeSite+"/{userId}",className:"icon_yinyuetai",text:"<strong>我的音悦Tai</strong>"},{link:homeSite+"/{userId}/mv",className:"icon_mv",text:"我的MV"},{link:homeSite+"/{userId}/pl",className:"icon_playlist",text:"我的悦单"},{link:homeSite+"/{userId}/friend",className:"icon_friend",text:"我的好友"}]}],toggleLoginForm:function(){var a=$("topBarLogin");var c=a.getElement("a");var b=$(document),e=this;var d=function(f){a.removeClass("topBarLoginBtn");b.removeEvent("click",d)};if(a.hasClass("topBarLoginBtn")){a.removeClass("topBarLoginBtn")}else{a.addClass("topBarLoginBtn");setTimeout(function(){b.addEvent("click",d)},200)}c.blur()},init:function(){var d=$("topBarLogin");var a=d.getElement("a[.topBarLoginPanelOpA]");var c=false,b;a.addEvent("click",function(){if(b){return}var e=this;if(!c){c=b=true;new Request.HTML({url:"/ajax/topbar-login",method:"get",onSuccess:function(h,k,g){b=false;var j=new Element("div",{"class":"topBarLoginForm",html:g,events:{click:function(l){l.stopPropagation()}}}).inject(a,"after");var f=$("topBarLoginForm");var i=$("login_error");ajaxForm.init(f,{useJSONP:true,onRequest:function(n){var l=n.email.value.trim();if(l==""){i.setStyle("display","block");i.getElement("em").set("html","请输入邮箱或手机号");return false}var m=/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-])+(\.[A-Za-z0-9-]+)*((\.[A-Za-z0-9]{2,})|(\.[A-Za-z0-9]{2,}\.[A-Za-z0-9]{2,}))$/;if(!l.match(m)){var o=/^1[3|4|5|7|8]\d{9}$/;if(!l.match(o)){i.setStyle("display","block");i.getElement("em").set("html","请输入正确的邮箱或手机号");return false}}if(n.password.value==""){i.setStyle("display","block");i.getElement("em").set("html","请输入登录密码");return false}var p=n.email.value.trim()+n.password.value.trim();attachYytForm(n,p);return true},onComplete:function(l){if(l.error){i.setStyle("display","block");i.getElement("em").set("html",l.message);return false}login.loginComplete(l);Y.rdaq.call(function(){Y.rdaq.login(l.userId)})}});loginapi_js(j);$$("#pop-username-top,#pop-password-top").each(function(l){var m=l.get("value");l.addEvents({focus:function(){if(l.get("value")==m){l.set("value","")}l.getParent().addClass("focus")},blur:function(){if(l.get("value")==m||!l.get("value")){l.getParent().removeClass("focus");l.set("value",m)}}})});$$("#topBarLoginForm input").each(function(l){if(l.hasClass("i_text")){l.addEvents({blur:function(){if(l.get("value")==""){l.set("value",l.get("defaultValue"));l.removeClass("focus")}},focus:function(){if(l.get("value")==l.get("defaultValue")){l.set("value","")}}})}});if(Browser.ie6){$("topBarLoginSubmit").addEvents({mouseover:function(){this.className="hover"},mouseout:function(){this.className=""}});topbar.fixIE6($$("#topBarUserPanel>ul>li"))}e.toggleLoginForm()}}).send();return false}this.toggleLoginForm();return false}.bind(this));login.callbacks.push(function(f){topbar.toggleLoginForm();topbar.links[0].info.src=f.headImg;if(Browser.ie){topbar.links[0].info.text=(f.userName).substr(0,4)}else{topbar.links[0].info.text=(f.userName).substr(0,6)}var e=f.messageSessionsInfo;if(e){topbar.links[1].info.text=e.totalUnreadCount;if(topbar.links[1].info.text){topbar.links[1].info.src="/images/main/core/new_msg.gif"}if(e.totalUnreadCount>0){if(e.privateUnreadCount>0){topbar.links[1].links[0].text=topbar.links[1].links[0].text+" ("+e.privateUnreadCount+")"}if(e.atmeCount>0){topbar.links[1].links[1].text=topbar.links[1].links[1].text+" ("+e.atmeCount+")"}if(e.commentUnreadCount>0){topbar.links[1].links[2].text=topbar.links[1].links[2].text+" ("+e.commentUnreadCount+")"}if(e.notificationUnreadCount>0){topbar.links[1].links[3].text=topbar.links[1].links[3].text+" ("+e.notificationUnreadCount+")"}if(e.announcementUnreadCount>0){topbar.links[1].links[4].text=topbar.links[1].links[4].text+" ("+e.announcementUnreadCount+")"}if(f.messageSessionsInfo.notifyFeedCount>0){topbar.links[1].links[5].text=topbar.links[1].links[5].text+" ("+e.notifyFeedCount+")"}}}if($("topBarUserPanel")){var g=$("topBarUserPanel").getElement("ul");g.innerHTML=topbar.makeHtml()+g.innerHTML;topbar.fixIE6($$("#topBarUserPanel>ul>li"));$("topBarLogin").setStyle("display","none");$("topBarReg").setStyle("display","none");$("topBarLogined").setStyle("display","inline")}})},makeHtml:function(){var a=topbar.links;var c="";for(var b=0,e=a.length;b<e;b++){var f="";if(a[b].info.className){var d=a[b].info.src||"/images/common/core/opacity.png";f='<img src=" '+d+' " class=" '+a[b].info.className+' " alt=" '+a[b].info.text+' "/>'}c+='<li class="topBarUserPanelOption loginedOption">';if(a[b].info.text==0){c+='<a href="'+a[b].info.link+'" class="topBarUserPanelOptionA">'+f+'<img src="/images/common/core/opacity.png" alt="" class="icon_selectDown"/><!--[if lt IE 9]><span></span><![endif]--></a>'}else{c+='<a href="'+a[b].info.link+'" class="topBarUserPanelOptionA">'+f+"<em>"+a[b].info.text+'</em><img src="/images/common/core/opacity.png" alt="" class="icon_selectDown"/><!--[if lt IE 9]><span></span><![endif]--></a>'}c+=topbar.makeHtml2(a[b].links);c+="</li>"}return c},makeHtml2:function(d){var b='<div class="topBarUserSelect"><!--[if lt IE 9]><span class="topBarUserSelectBgT"></span><![endif]--><ul>';for(var a=0,c=d.length;a<c;a++){b+='<li><a href="'+d[a].link.substitute({userId:Y.user.userId})+'"><img src="/images/common/core/opacity.png" class="'+d[a].className+'" alt=""/> '+d[a].text+" </a></li>"}b+='</ul><!--[if lt IE 9]><span class="topBarUserSelectBgB"></span><![endif]--></div>';return b},fixIE6:function(a){if(Browser.ie6){a.each(function(b){b.removeEvents("mouseenter");b.removeEvents("mouseleave");b.addEvents({mouseenter:function(){b.addClass("hover")},mouseleave:function(){b.removeClass("hover")}})})}}};function doSearch(a){var b=$("hidden_search_form");if(!b){b=new Element("form",{id:"hidden_search_form",action:"http://so.yinyuetai.com/",method:"get",target:"_blank",styles:{display:"none"}});new Element("input",{type:"hidden",name:"keyword",value:a}).inject(b);b.inject(document.body)}b.keyword.value=a;b.submit()}function tabToggle(d,b,e,a,c){e=e||"mouseenter";a=a||"current";d.each(function(g,f){if(g.hasClass(a)){b[f].setStyles({display:"block",opacity:1})}else{b[f].setStyles({display:"none",opacity:0})}g.addEvent(e,function(h){if(g.hasClass(a)){return}b.setStyles({display:"none",opacity:0});b[f].fade("in");b[f].setStyle("display","block");d.removeClass(a);g.addClass(a);g.blur();if(c){c(g,b[f])}return false})})}function checkFlash(){var a=0;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");a=1}catch(b){if(navigator.plugins&&navigator.plugins.length>0&&navigator.plugins["Shockwave Flash"]){a=1}}if(!a){return"<p>您的浏览器不支持Flash,<a href='http://get.adobe.com/cn/flashplayer/' target='_target'>立即下载</a></p>"}return""}function getFlashVersion(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return"6,0,0"}}catch(b){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(b){}}return"0,0,0"}function checkFlashVersion(a){return""}function loadFlash(h,b,i,j,c,k,e,f){f=f||{};var g;var d=checkFlash();if(d!=""){g=d;documentWrite(e,b,g);return}if(f.version){d=checkFlashVersion(f.version);if(d!=""){g=d;documentWrite(e,b,g);return}}i=i||"flashplayer";j=j||"100%";c=c||"100%";k=k||"";var l=f.wmode||"opaque";var a=f.bgColor||"#000000";if(Browser.ie){g='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+j+'" height="'+c+'" id="'+i+'" name="'+i+'"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><param name="movie" value="'+h+'" /><param name="loop" value="true" /><param name="menu" value="false" /><param name="wmode" value='+l+' /><param name="quality" value="high" /><param name="bgcolor" value='+a+' /><param name="flashvars" value="'+k+'" /></object>'}else{g='<embed  pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+j+'" height="'+c+'" flashvars="'+k+'" bgcolor="'+a+'" allowfullscreen="true" allowscriptaccess="always" wmode="'+l+'" id="'+i+'" name="'+i+'" src="'+h+'" />'}documentWrite(e,b,g)}Y.swfClose=function(a){$(a).dispose()};function documentWrite(b,a,c){if(b){document.write(c)}else{window.addEvent("domready",function(){if($(a)){$(a).set("html",c)}})}}function addBookmark(c,b){try{window.external.AddFavorite(c,b);return false}catch(a){try{window.sidebar.addPanel(b,c,"");return false}catch(d){return false}}}function setHomepage(){try{document.body.style.behavior="url(#default#homepage)";document.body.setHomePage("http://www.yinyuetai.com")}catch(a){alert("暂不支持此浏览器")}}Y.mobile=(function(){var d={},f={isIPAD:"iPad",isIPHONE:"iPhone",isIPOD:"iPod",isMac:"Mac",isWPHONE:"Windows Phone",isIE10:"MSIE 10",isSonyDTV:"SonyDTV",isLEPAD:"lepad_hls",isMIUI:"MI-ONE",isAndroid:"Android"},e;for(e in f){d[e]=-1!==navigator.userAgent.indexOf(f[e])?true:false}d.isIOS=d.isIPAD||d.isIPHONE||d.isIPOD;d.isWIN=d.isWPHONE;d.isSupport=d.isAndroid||d.isIOS||d.isLEPAD||d.isSonyDTV||d.isWIN;d.isP2PSupport=!d.isSupport&&!d.isMac;return d})();Y.player={init:function(b,a){if(!Y.partner.loadEnabled){return}this.box=$(b);a=Object.merge({simple:true,videoId:0,hcVideoUrl:"",width:"100%",height:"100%",documentWrite:false,swf:"",flashId:"yinyuetaiplayer",html5Id:"videoplayer",flashVars:null},a);if(Y.mobile.isSupport){if(!a.simple&&(Y.mobile.isIPAD||Y.mobile.isWPHONE)){In.add("playerH5-css",{path:urlStatic+"/css/main/player/html5-player.$44638.css",type:"css"});In.add("playerH5",{path:urlStatic+"/js/main/player/html5-player.$44642.js",type:"js",rely:["playerH5-css","juicer"]});In("playerH5",function(){Y.player.H5.init(b,a)})}else{this.loadSimpleVideo(b,a)}}else{this.loadFlash(a.swf,this.box,a.flashId,"100%","100%",a.flashVars,a.documentWrite,a.flashParams)}},loadSimpleVideo:function(a,c){var d=$(a);c=Object.merge({videoId:0,hcVideoUrl:"",width:"100%",height:"100%"},c);d.set("html",'<video width="'+c.width+'" height="'+c.height+'" id="'+c.html5Id+'" autoplay preload controls x-webkit-airplay="allow" src="'+c.hcVideoUrl+'"><source src="'+c.hcVideoUrl+'" type="video/mp4"/></video>');var b=$(c.html5Id);b.load();b.play();if(c.videoId&&c.hcVideoUrl){In.add("h5stats",{path:urlStatic+"/js/main/player/h5stats.$51355.js",type:"js"});In("h5stats",function(){Y.player.statisticsHtml5({vid:c.videoId,vurl:c.hcVideoUrl})})}},loadFlash:loadFlash};var mobile={};mobile.init=function(){mobile.d=navigator.userAgent.toLowerCase();mobile.android=/android/.test(mobile.d);mobile.ipod=/ipod\;/.test(mobile.d);mobile.iphone=/iphone os/.test(mobile.d);mobile.realIpad=/ipad/.test(mobile.d);mobile.wphone=/windows phone os/.test(mobile.d);mobile.ipad=mobile.realIpad||mobile.iphone};mobile.init();function showMessage(e,a,d){var c="";if(messageOverrides!=""){c=messageOverrides;e="error"}else{var b=a.split("\n");b.each(function(g,f){if(g.trim().length>0){if(f>0){c+="<br/>"}c+=g}})}In("humanmessage",function(){new HumanMessage(c,{type:e,textAlign:"center"},d)})}function errorMessage(b,a){showMessage("error",b,a)}function successMessage(b,a){showMessage("success",b,a)}function infoMessage(b,a){showMessage("info",b,a)}window.addEvent("domready",function(){if(!Y.partner.loadEnabled){return}if($("topBarLogin")){topbar.init()}login.refreshLoginInfo();$$("form[name=searchForm]").each(function(c){c.method="get";c.addEvent("submit",function(){var d=this["keyword"].value.trim();if(d==""||d.test(/^http:\/\//)||d.test(/^<embed/)){return false}return true});var b=$(c.keyword);if(b){b.setAttribute("autocomplete","off");if(c.get("name")=="searchForm"){initSearchType(b);function a(){b.removeEvent("focus",a);var d=10;if(b.get("position")=="footer"){d=5}In("suggest",function(){new Suggest(b,{maxResults:d});b.fireEvent("focus")})}b.addEvent("focus",a)}}});(function(){var a=[];document.onkeydown=function(c){c=c||window.event;var d=c.keyCode;if(d!=17&&d!=18&&d!=16&&d!=89){return}if(!a.contains(d)){a.push(d)}if(a.length==4){a.empty();var b=window.YYTrequestEnd-window.YYTrequestStart;var e="CostTime : "+b+" ms\n";e+="Host : "+window.YYThostName+"\n";e+="Rev : "+window.YYTrev;e+="\n\n亲，你居然能按到这个神奇的快捷键！！";alert(e)}};document.onkeyup=function(b){b=b||window.event;var c=b.keyCode;a.erase(c)}})();YYT.widget.returnTop();if(!Y.disablePcpusher){YYT.widget.pcpush()}});function initSearchType(d){var a=d.getParent("div.searchBar");var e=a.getElement("[name=st]");var g=a.getElement("[name=searchTypeList]");var c=d.getParent("form");var f;e.addEvents({mouseenter:function(){clearTimeout(f);g.setStyle("display","block")},mouseleave:function(){g.fireEvent("mouseleave")}});var b=g.getElement("li.selected");g.addEvents({mouseenter:function(){clearTimeout(f)},mouseleave:function(){f=setTimeout(function(){g.setStyle("display","none")},200)},"click:relay(li)":function(h,i){if(i.hasClass("selected")){return}b&&b.removeClass("selected");i.addClass("selected");b=i;var j=i.get("name");c.set("action",searchSite+"/"+j);e.set("html",i.get("text")+"<b></b>");g.setStyle("display","none")}})}function showComplainDialog(){var b="complainDialog";var a=$("siteAdviceDiv").get("html");login.popupLogin(function(){mbox.show(b,"请说明投诉团长的理由",a,{width:408,className:"suggestnew",onInit:function(c){c.initContent="我要投诉**团长**";var f=c.getElement("form");if(!f){return}var d=$(f.content);d.set("html",c.initContent);d.addClass("hint_color");d.addEvent("focus",function(){if(this.value==c.initContent){this.value="";this.removeClass("hint_color")}}.bind(d));d.addEvent("click",function(){if(this.value==c.initContent){this.value="";this.removeClass("hint_color")}}.bind(d));d.addEvent("blur",function(){if(this.value==""){this.value=c.initContent;this.addClass("hint_color")}}.bind(d));var e=c.getElement("[name=waring_info]");ajaxForm.init(f,{onRequest:function(){var g=f.elements.content;if(g.value.trim()==""||g.value.trim()==c.initContent){e.set("html","请输入您要投诉的内容");e.setStyle("display","");g.addEvent("focus",function(){e.setStyle("display","none")});return false}return true},onComplete:function(g){if(!g.error){successMessage("您的投诉已经提交成功，我们会尽快处理并通过站内消息回复。");c.hide()}else{e.set("html","action.message");e.setStyle("display","")}}})}})},null)}function send_apply_fan(c){var a="sendApplyFan"+c;var b=new Request({url:"/fan/ajax/send-fan-apply",method:"get",data:"fid="+c});login.popupLogin(function(){mbox.showAjax(a,"申请团长",b,{width:440,onInit:function(e){var d=e.getElement("form");d.action="/fan/apply-for-fan";ajaxForm.init(d,{onRequest:function(){var f=d.elements.content;if(f.value.trim()==""){errorMessage("请输入申请的理由");f.focus();return false}if(f.value.trim().length>1000){errorMessage("内容不能超过1000字");f.focus();return false}return true},onComplete:function(f){if(!f.error){successMessage("申请已发送成功，请等待审核!");e.hide()}else{errorMessage(f.message)}}})}})},null)}function send_resign_fan(c){var a="resignApplyFan"+c;var b=new Request({url:"/fan/ajax/send-fan-apply",method:"get",data:"fid="+c});login.popupLogin(function(){mbox.showAjax(a,"辞去团长",b,{width:440,onInit:function(e){var d=e.getElement("form");d.action="/fan/resign-for-fan";ajaxForm.init(d,{onRequest:function(){var f=d.elements.content;if(f.value.trim()==""){errorMessage("请输入辞职的理由");f.focus();return false}if(f.value.trim().length>1000){errorMessage("内容不能超过1000字");f.focus();return false}return true},onComplete:function(f){if(!f.error){successMessage("辞职申请已发送成功，请等待审核!");e.hide()}else{errorMessage(f.message)}}})}})},null)}function send_message(b){var a="sendMessage"+b;var c=new Request({url:"/ajax/write-message",method:"get",data:"friendId="+b});login.popupLogin(function(){if(!isEmailVerified){checkEmail();return}mbox.showAjax(a,"发送短消息",c,{width:440,onInit:function(e){var d=e.getElement("form");ajaxForm.init(d,{crossDomain:true,onRequest:function(){var f=d.elements.content;if(f.value.trim()==""){errorMessage("请输入消息内容");f.focus();return false}if(f.value.trim().length>1000){errorMessage("消息内容不能超过1000字");f.focus();return false}return true},onComplete:function(f){if(!f.error){d.reset();successMessage("短消息发送成功");e.hide()}else{errorMessage(f.message)}}})}})},null)}function follow(a,b){login.popupLogin(function(){if(userId==a){errorMessage("似乎没必要关注自己哦");return}var c=homeSite+"/follow/follow";var d="friendId="+a;new Request.JSONP({url:c,method:"post",data:d,onSuccess:function(e){if(!e.error){Y.rdaq.call(function(){Y.rdaq.follow(a)});if(b){b(e.isFriend,a)}}else{errorMessage(e.message)}}}).send()},null)}function openWindowCenter(g,a,e){var f=window.getSize();var h=f.x;var c=f.y;var d,b;if(a>=h){d=0;a=h}else{d=(h-a)/2}if(e>=h){b=0;e=c}else{b=(c-e)/2}window.open(g,"newwindow","height="+e+",width="+a+",left="+d+",top="+b+",toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no")}function openPlafFormFail(a){In("humanmessage",function(){errorMessage(a)})}function loginapiLogined(b,c){Y.rdaq.call(function(){Y.rdaq.login(b.userId)});login.loginComplete(b);if(b.firstlogined){var a=new Request({url:"/ajax/binding",method:"get",data:"plat="+c});In.load(urlStatic+"/css/login/bind.$44514.css","css",null,function(){mbox.showAjax("sinaReg","音悦Tai",a,{width:774,className:"login_bind",onInit:function(g){var h=g.getElement("[node=userName]");h.set("html",b.userName);var f=g.getElement("[node=headImg]");f.set("src",b.headImg);var d=g.getElement("form");var e=g.getElement("[name=login_error]");ajaxForm.init(d,{onRequest:function(){var i=d.email;var k=i.get("value");if(i.value.trim()==""||i.value.trim()=="val"){e.setStyle("display","block");e.getElement("em").set("html","请输入电子邮箱");return false}var j=/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-])+(\.[A-Za-z0-9-]+)*((\.[A-Za-z0-9]{2,})|(\.[A-Za-z0-9]{2,}\.[A-Za-z0-9]{2,}))$/;if(i.value.trim().match(j)==null){e.setStyle("display","block");e.getElement("em").set("html","电子邮箱格式错误");return false}var l=d.password;if(l.value.trim()==""){e.setStyle("display","block");e.getElement("em").set("html","请输入密码")}attachYytForm(d,i.value.trim()+l.value.trim());return true},onComplete:function(i){if(i.error){e.setStyle("display","block");e.getElement("em").set("html",i.message);return false}successMessage("与音悦Tai帐号绑定成功");g.hide();setTimeout(function(){window.location.href="/home/connection/info"},500)}});$$("#pop-username,#pop-password").each(function(i){var j=i.get("value");i.addEvents({focus:function(){if(i.get("value")==j){i.set("value","")}i.getParent().addClass("focus")},blur:function(){if(i.get("value")==j||!i.get("value")){i.getParent().removeClass("focus");i.set("value",j)}}})});if(Browser.ie6){$("pop-form-loginBtn").addEvents({mouseover:function(){this.className="hover"},mouseout:function(){this.className=""}})}}})})}}function addFavoriteVideo(c,b,a){c=$(c);if(c.get("flag")){return}c.set("flag",1);login.popupLogin(function(){var d="/mv/add-favorite";var e="videoId="+b;new Request.JSON({url:d,method:"get",data:e,onSuccess:function(f){c.erase("flag");if(!f.error){Y.rdaq.call(function(){Y.rdaq.fav(b,"mv")});var g=new Element("span",{"class":"ico_operate_down04",html:"已收藏"});var h=c.getParent();g.inject(h);c.dispose();if(a){a(b)}}else{infoMessage(f.message,1200)}}}).send()},{hideCallback:function(){c.erase("flag")}})}function addFavoritePlaylist(a,d,b){a=$(a);var c=a.get("flag");if(!c){a.set("flag",1);login.popupLogin(function(){var e="/pl/add-playlist-favorite";var f="playlistId="+d;new Request.JSON({url:e,method:"get",data:f,onSuccess:function(g){a.erase("flag");if(!g.error){Y.rdaq.call(function(){Y.rdaq.fav(d,"pl")});var h=new Element("span",{"class":"ico_operate_down04",html:"已收藏"});var i=a.getParent();h.inject(i);a.dispose();if(b){b(d)}}else{infoMessage(g.message)}}}).send()},{hideCallback:function(){a.erase("flag")}})}}function join_fanclub(a,b){login.popupLogin(function(){var c="http://www.yinyuetai.com/home/fanclub/join-fanclub";var d="artistId="+a;new Request.JSONP({url:c,data:d,onSuccess:function(e){if(!e.error){Y.rdaq.call(function(){Y.rdaq.joinFan(a)});successMessage("成功加入饭团"+e.artist_name);b&&b()}else{errorMessage(e.message)}}}).send()},null)}function reloadDocument(a){a=a||2000;setTimeout(function(){window.location.href=window.location.href},a)}function checkComment(e,a,d){var c=e.content;var b=c.value.trim().length;if(b==0){$("commentFormHint").set("html","请输入评论内容");c.focus();return false}if(b<a){$("commentFormHint").set("html","评论应至少有"+a+"个字");c.focus();return false}if(b>d){$("commentFormHint").set("html","您的评论有点长哦，精简一下吧，请控制在"+d+"字以内");c.focus();return false}$("commentFormHint").set("html","");return false}function showCommentForm(a){if($$(".authCode")){$$(".authCode").set("src","/writing/auth-code-image?t="+Date.now())}if($("comment_cp_open")){$("comment_cp_open").tween("opacity","0")}if($("comment_cp")){$("comment_cp").setStyles({display:"block",height:"160px"})}if($("userLogin")){if(userId==0){$("userLogin").setStyle("display","block");if($("buttonField")){$("buttonField").setStyle("display","none")}if($("editor")){$("editor").setStyle("display","none")}}else{$("userLogin").setStyle("display","none");if($("buttonField")){$("buttonField").setStyle("display","block")}if($("editor")){$("editor").setStyle("display","block");$("editor").focus()}window.editorcheck=checkTextareaChar("editor","commentContentLength",a,"showLeftCount")}}else{window.editorcheck=checkTextareaChar("editor","commentContentLength",a,"showLeftCount")}}function hideCommentForm(){if($("comment_cp")){$("comment_cp").tween("height","0");setTimeout(function(){$("comment_cp").setStyle("display","none")},500)}if($("comment_cp_open")){$("comment_cp_open").tween("opacity","1")}if($("commentForm")){$("commentForm")["content"].value=""}if($("commentFormHint")){$("commentFormHint").set("html","")}clearInterval(window[editorcheck]);var a=$("synFanBox");if(a){a.getElement("input[type=checkbox]").checked=false;a.setStyle("display","none")}}function checkTextareaChar(d,c,g,h,b){var e=d;d=typeof d=="object"?d:$(d);c=typeof c=="object"?c:$(c);var i=d.value;var a="textarea"+(+new Date());var f=$("synFanBox");window[a]=setInterval(function(){if(!d){clearInterval(window[a]);return}var j=d.value.length;f=$("synFanBox");if(e=="editor"&&f){var k=f.getStyle("display");if(j>200&&k=="none"){f.setStyle("display","inline").fade("in")}else{if(j<200&&k=="inline"){f.fade("out").setStyle("display","none")}}}if(j>g){d.value=d.value.substr(0,g)}if(!h){c.set("html",j)}else{if(b&&d.value==i){c.set("html",g)}else{c.set("html",g-j)}}},250);return a}function ajax_title_content_form(d,f,e,c,a,b,g){ajaxForm.init(d,{onRequest:function(){if(!isEmailVerified){checkEmail();return false}g.sync();var i=d.title;var h=g.getContent();var k=i.value.trim().length;var j=h.trim().length;if(f>0&&k<f){errorMessage("标题应至少有"+f+"个字");i.focus();return false}if(e>0&&k>e){errorMessage("您的标题有点长哦，请控制在"+e+"字以内吧");i.focus();return false}if(c>0&&j<c){errorMessage("内容应至少有"+c+"个字");return false}if(a>0&&j>a){errorMessage("您的内容有点长哦，请控制在"+a+"字以内吧");return false}successMessage("正在发表，请稍候...");return true},onComplete:function(h){if(!h.error){if(b&&b.hide){b.hide()}d.reset();g.setContent("");g.sync();setTimeout(function(){successMessage("发表成功,正在更新页面内容，请稍候...")},2600);setTimeout(function(){window.location.reload()},3800)}else{setTimeout(function(){errorMessage(h.message)},2800)}}})}function getSelectedText(){if(Browser.ie){return document.selection.createRange().text}else{return window.getSelection().toString()}}function executeInProgress(b,a,e,d,c){c=c||0;if(d<0){d=d||-1;if(c<=e){return}}else{d=d||1;if(c>=e){return}}c+=d;b(c);setTimeout(function(){executeInProgress(b,a,e,d,c)},a)}function smoothScrollTo(a){var c=window.getScroll().y;var b=a-c;var e=b<0;var d=Math.ceil(Math.abs(b)/10);if(d<50){d=50}d=e?0-d:d;executeInProgress(function(f){window.scrollTo(window.getScroll().x,f)},20,a,d,c)}function setcopy_gettext(c,d){try{var f=$(c);if(f){var a;if(f.tagName.toLowerCase()=="input"){a=f.value}else{a=f.get("html")}window.document[d].SetVariable("str",a)}}catch(b){}}function toggleMoreRelatedMvs(b){var a=$("moreRelatedMvsLink");if(a){if(!cache.hiddenMvs){cache.hiddenMvs=[]}cache.showHiddenMvs=cache.showHiddenMvs||false;if(!a.getProperty("ajaxFlag")){a.setProperty("ajaxFlag",true);$("relatedMvs").innerHTML+='<div class="ajax_loading"></div>';new Request({url:"/mv/ajax/video_more_related?videoId="+b,method:"get",onSuccess:function(c){$$("#relatedMvs>div").dispose();$("relatedMvs").innerHTML+=c;cache.hiddenMvs=$("relatedMvs").getElements("li[class=hidden]");toggleMoreRelatedMvs(b)}}).send();return}if(cache.showHiddenMvs){cache.hiddenMvs.each(function(c){c.removeClass("show");c.addClass("hidden")});cache.showHiddenMvs=false;a.removeClass("ico_stats_open");a.addClass("ico_stats_close");a.set("html","展开更多")}else{cache.hiddenMvs.each(function(c){c.removeClass("hidden");c.addClass("show")});cache.showHiddenMvs=true;a.removeClass("ico_stats_close");a.addClass("ico_stats_open");a.set("html","收起列表")}}}function stripUrlServerPart(c){c=(c||"").trim();var b=new RegExp(/(?:http:\/\/[^/]+)($|\/.*)/ig).exec(c);if(b&&b.length&&b.length>1){var a=b[1].trim();if(a==""){return"/"}else{return a}}return c}function loginapi_js(a){var d=a.getElement("[node=weiboLogin]");if(d){var f=d.getElements("a");var c=false,h=navigator.userAgent.toLowerCase().indexOf("se 2.x")>-1?true:false;try{if(window.external&&window.external.twGetRunPath){var g=external.twGetRunPath();if(g&&g.toLowerCase().indexOf("360")>-1){c=true}}}catch(b){c=false}if(h||c){f.each(function(e){var i,k=0;var j=function(){if(k<30){var l=login.refreshLoginInfo();if(l===false){i=setTimeout(j,2000);k++}}else{clearTimeout(i)}};e.addEvent("click",j)})}}}function initUeditor(d,b,c){In.add("editor",{path:urlStatic+"/js/ueditor/themes/default/ueditor.$33199.css",type:"css"});In.add("editor-config",{path:urlStatic+"/js/ueditor/editor_config.$48042.js",type:"js"});In.add("editor_all",{path:urlStatic+"/js/ueditor/editor_all.$41816.js",type:"js",rely:["editor","editor-config"]});var e;In.ready("editor_all",function(){b=Object.merge({textarea:d},b);e=new baidu.editor.ui.Editor(b);e.render(d);e.addListener("click",a);return e},function(){c&&c(e)});function a(){if(!userId&&$("not_login")){$("not_login").setStyle("display","block")}e.removeListener("click",a)}}function getPlayer(a){a=a||"yinyuetaiplayer";if(window.document[a]){return window.document[a]}else{if(navigator.appName.indexOf("Microsoft")==-1){if(document.embeds&&document.embeds[a]){return document.embeds[a]}}}return document.getElementById(a)}function playerPause(){try{var c=$("player");if(c){c.addClass("flash_min")}var b=$$("[name=mvplayerbox]");if(b&&b.length>0){b.each(function(d){d.addClass("flash_min")})}}catch(a){}}function playerPlay(){try{var c=$("player");if(c){c.removeClass("flash_min")}var b=$$("[name=mvplayerbox]");if(b&&b.length>0){b.each(function(d){d.removeClass("flash_min")})}}catch(a){}}function checkEmail(){if(isEmailVerified==undefined){setTimeout(function(){checkEmail()},40);return false}var a='<div style="padding: 12px 30px;"><p>您好像还没有进行邮箱验证。</p><p>为不影响部分功能的使用，请先进行 <a href="'+homeSite+'/settings/email" target="_blank" class="special f14">邮箱验证</a></p></div>';mbox.show("checkEmail","请先进行邮箱验证",a,{width:400})}window.addEvent("domready",function(){if(!Y.partner.loadEnabled){return}var g=0;var i=$("mainNav");var h=$("main_subNav");if(i&&h){var k=i.hasClass("sub_nav_show");var c=k;var f=i.getElements("li");var e,a;var j=new Fx.Tween(h,{duration:150});f.each(function(m){if(m.hasClass("on")){e=a=m}m.addEvents({mouseenter:function(){g=setTimeout(function(){g=0;var n=m.getElement("div.subnav_box");if(k&&m!=a){l(m);return}if(!k){if(c){if(m!=e){e.removeClass("hover");e=m}if(n){e.addClass("hover")}else{d()}}else{n&&b(m)}}},100)},mouseleave:function(){clearTimeout(g)}})});i.getElement("ul").addEvents({mouseleave:function(){if(e!=a){l(a)}if(!k){d();a&&a.removeClass("hover")}}});function l(m){e&&e.removeClass("hover");m&&m.addClass("hover");e=m}function b(m){j.cancel();j.addEvent("cancel",function(){j.removeEvents("complete")});j.removeEvents("complete");j.addEvent("complete",function(){j.removeEvents("cancel");if(m!=e){l(m)}else{e.addClass("hover")}c=true});j.start("height","41px")}function d(){j.cancel();j.addEvent("cancel",function(){j.removeEvents("complete")});j.removeEvents("complete");j.addEvent("complete",function(){j.removeEvents("cancel");c=false});j.start("height","0")}}});var requestData={};var pageNav={current:1,params:"",init:function(a,b,d,c){this.isJsonp=c;if(a){this.type="scroll"}else{this.type="page"}this.mvList=$(b);this.bindPage()},onRequest:function(){if(this.type=="scroll"){if(this.scrollBtn.get("disable")){return false}this.scrollBtn.set("text","正在加载中……");this.scrollBtn.addClass("disabled")}else{if(this.type=="page"){this.mvList.set("html",'<div class="loading" style="padding:50px 0;"></div>')}}return true},getParams:function(b,c){if(requestData.params){var a=$type(requestData.params);if(a=="string"){this.params=requestData.params+"&page="+b+"&pageType="+c}else{if(a=="function"){this.params=requestData.params()+"&page="+b+"&pageType="+c}}}else{this.params="page="+b+"&pageType="+c}},nextPage:function(d,a,b){this.type=a;this.current=d;this.getParams(d,a);if(!this.onRequest()){return}var c=this;if(this.isJsonp){new Request.JSONP({url:requestData.url,method:"get",data:this.params,onSuccess:function(e){c.setListHTML(e.html);c.bindPage();if(b){b()}}}).send()}else{new Request.HTML({url:requestData.url,method:"get",data:this.params,onSuccess:function(e,g,f){c.setListHTML(f);c.bindPage();if(b){b()}}}).send()}},setListHTML:function(a){var c,b=$("pagetype");if(this.type=="page"){c=this.mvList;this.mvList.set("html",a)}else{if(this.type=="scroll"){if(b){b.dispose()}c=new Element("div",{html:a}).inject(this.mvList)}}if(requestData.callback){requestData.callback(c)}},bindPage:function(){this.pageNavEle=$("pageNav");this.scrollBtn=$("scrollBtn");var c=$$("#pagetype a[name]");var a;c.some(function(f){var e=f.get("class");if(e.indexOf("_on")!=-1){a=f;return true}});var b=false;var d=this;c.each(function(e){e.addEvent("click",function(){var f=this.get("class");if(f.indexOf("_on")!=-1){return}this.set("class",f+"_on");a.set("class",a.get("class").replace("_on",""));a=this;d.type=e.get("name");switch(d.type){case"page":b=false;d.pageNavEle.setStyle("display","block");d.scrollBtn.setStyles({display:"none",opacity:0});new Fx.Tween(d.pageNavEle).start("opacity",[0,1]);break;case"scroll":b=true;d.pageNavEle.setStyles({display:"none",opacity:0});d.scrollBtn.setStyle("display","block");d.scrollBtn.erase("disable");new Fx.Tween(d.scrollBtn).start("opacity",[0,1]);break}})})}};function common_page(b,c,a){if(c=="page"){window.scrollTo(0,200)}pageNav.nextPage(b,c,a);return false}function getStrLength(a){var b=0;var c=a.trim().length;while(c--){if(/^[\u0000-\u00ff]$/.test(a.charAt(c))){b+=1}else{b+=2}}return b}function remove_follow(c,b){var d=homeSite+"/follow/remove-follow";var a="friendId="+c;new Request.JSONP({url:d,method:"get",data:a,onSuccess:function(e){if(!e.error){Y.rdaq.call(function(){Y.rdaq.rmFollow(c)});if(b){b()}else{reloadDocument(2000)}}else{errorMessage(e.message)}}}).send()}function setRemark(f,e,a,h,d){if(h){h()}var c="setMark"+f,b;var g=new Request({url:"/ajax/set_remark",method:"get"});if(e){b="设置备注"}else{b="修改备注"}login.popupLogin(function(){mbox.showAjax(c,b,g,{width:300,onInit:function(j){var i=j.getElement("form");i.userId.value=f;if(!e){i.remarkName.value=a.getElement("[name=remarkName]").get("text").trim()}i.getElement("[name=cancel]").addEvent("click",function(){j.hide();return false});ajaxForm.init(i,{onRequest:function(){var k=i.getElement("[name=remarkName]");if(getStrLength(k.value.trim())>30){errorMessage("备注长度过长，不能超过30个字符或15个汉字~");k.focus();return false}return true},onComplete:function(k){if(!k.error){successMessage("备注设置成功");j.hide();if(d){d(f,e,a,k.personRemark.remarkName)}}else{errorMessage(k.message)}}})}})},null)}(function(){var b=[];var a=function(d,c){if(typeOf(d)==="string"&&typeOf(c)==="string"){return d===c}else{if(typeOf(d)==="object"&&typeOf(c)==="object"){if(Object.getLength(d)===Object.getLength(d)){var e=true;Object.each(d,function(g,f){if(g!=c[f]){e=false;return}});return e}}}return false};Y.ajax=function(c){var l=Object.append({secret:true},c||{});for(var e=0,h=b.length;e<h;e++){var d=b[e];if(l.url==d._url&&a(l.data,d._data)){return}}l.timeout=l.timeout||5000;var d;if(l.secret){var g=""+(new Date()).getTime();var f=y_vv(g);var k=yyt32(g,f);var j=yyt16(f,g);Cookie.write("p2",j,{domain:"yinyuetai.com"});l.data=l.data||"";if(typeof l.data=="string"){l.data+="&_t="+g+"&_p1="+k+"&_p2="+j}else{Object.append(l.data,{_t:g,_p1:k,_p2:j})}}if(l.dataType=="json"){d=new Request.JSON(l).send()}else{if(l.dataType=="html"){d=new Request.HTML(l).send()}else{d=new Request(l).send()}}d._url=l.url;d._data=l.data;b.push(d);d.addEvents({complete:function(){setTimeout(function(){b.splice(b.indexOf(d),1)},1000)},cancel:function(){b.splice(b.indexOf(d),1)},timeout:function(){b.splice(b.indexOf(d),1)}});return d};Y.get=function(g,c,e,d,h){var f={method:"get"};if(h){Object.merge(f,h)}g&&(f.url=g);c&&(f.data=c);e&&(f.onSuccess=e);d&&(f.dataType=d);return Y.ajax(f)};Y.getJSON=function(f,c,d,e){return Y.get(f,c,d,"json",e)};Y.post=function(g,c,e,d,h){var f={method:"post",dataType:"json"};if(h){Object.merge(f,h)}g&&(f.url=g);c&&(f.data=c);e&&(f.onSuccess=e);d&&(f.dataType=d);return Y.ajax(f)}})();Y.rdaq={inited:false,pageType:undefined,callbacks:[],init:function(){this.inited=true;var a=this;var b=window._vd_cfg||[];b.push(["sid","11B84513"]);b.push(["raw","raw.datasaying.com"]);b.push(["script","admin.datasaying.com"]);b.push(["userId",userId||(Y.user&&Y.user.userId)]);b.push(["ready","DSJS_READY"]);In.add("vd-cfg",{path:"http://admin.datasaying.com/collection/collection.all.js",type:"js"});In.add("rdaq",{path:urlStatic+"/js/common/core/rdaq.$51796.js",type:"js",rely:["vd-cfg"]});In("rdaq");window._vd_cfg=b;window.DSJS_READY=function(){Y.rdaq.OPTS={mv:DSJS.OPTS.ITEM,pl:DSJS.OPTS.LIST,user:DSJS.OPTS.MEMBER,fan:DSJS.OPTS.GROUP};Y.rdaq.PTS={index:DSJS.PTS.HOME,mv:DSJS.PTS.ITEM,pl:DSJS.PTS.LIST,home:DSJS.PTS.MEMBER,fan:DSJS.PTS.GROUP,album:DSJS.PTS.ALBUM,"default":DSJS.PTS.DEFAULT};In("rdaq",function(){Y.rdaq.setPageType(a.pageType);a._exec()})}},setPage:function(a){this.pageType=a},call:function(b,a){if(a){In.add("rdaq",{path:urlStatic+"/js/common/core/rdaq.$51796.js",type:"js"});In("rdaq",function(){b&&b()})}},_exec:function(){for(var c=0,b=this.callbacks.length;c<b;c++){var a=this.callbacks.shift();a()}}};Y.buildFragment=function(b){var d=document.createElement("div");d.innerHTML=b;var c=d.childNodes,a=Array.from(c);var g=document.createDocumentFragment();for(var f=0,e=c.length;f<e;f++){g.appendChild(a.shift())}return g};Y.sinaActivity={loaded:false,object_id:1008,act_map:{fav:"2289512782032417",rec:"3119987778118842"},load:function(){if(this.loaded){return}this.objectstr=JSON.encode({object_type:"video",id:"1008:{objectId}",author:{id:"{authorId}",display_name:"{authorName}",url:"http://i.yinyuetai.com/{authorId}",object_type:"person"},display_name:"{title}",url:"http://www.yinyuetai.com/{objectType}/{objectId}",create_at:"{pubDate}",update_at:"{pubDate}",summary:"{summary}",image:{url:"{headImg}",width:120,height:67},stream:{url:"{flvUrl}",width:440,height:356,duration:"{duration}"},embed_code:"http://player.yinyuetai.com/{objectType}/player/{objectId}/v_{userId}.swf"});var a=['<form action="http://api.weibo.com/2/activities/apps/update.json" method="post" target="iframeweibo">','<input type="hidden" name="source" value="2817290261"/>','<input type="hidden" name="tpl_id" value="2289512782032417"/>','<input type="hidden" name="object_id" value=""/>','<input type="hidden" name="content" value=""/>','<input type="hidden" name="object" value=""/>',"</form>",'<iframe src="about:blank" id="iframeweibo" name="iframeweibo" style="display: none"></iframe>'].join("");this.loaded=true;var b=new Element("div",{html:a,styles:{display:"none"}}).inject(document.body);this.form=b.getElement("form");this.tpl_id=$(this.form.tpl_id);this.oObject_id=$(this.form.object_id);this.oContent=$(this.form.content);this.oObject=$(this.form.object)},send:function(b){if(!Y.user.withSina){return}b=Object.merge({act:"fav",objectId:0,objectType:"video",content:"",userId:userId||Y.user.userId,display_name:Y.user.userName,title:"",pubDate:Date.now(),summary:"",headImg:"",flvUrl:"",duration:0},b);if(Y.user.syncWithSina){this.run(b,Y.user.syncWithSina);return}var a=this;new Request.JSON({url:"/person/get-person-info-sina",method:"get",onSuccess:function(c){if(c&&!c.error){Y.user.syncWithSina=c.shareStatus;if(Y.user.syncWithSina){a.run(b,Y.user.syncWithSina)}}}}).send()},run:function(a,c){var b=false;if(a.objectType=="video"){if(a.act=="fav"){if(c.favoriteMV){b=true}}else{if(a.act=="rec"){if(c.recommendMV){b=true}}}}else{if(a.objectType=="playlist"){if(a.act=="fav"){if(c.favoritePlayList){b=true}}else{if(a.act=="rec"){if(c.recommendPlayList){b=true}}}}}if(!b){return}this.load();this.tpl_id.value=this.act_map[a.act]||this.tpl_id.value;this.oObject_id.value=this.object_id+":"+a.objectId;this.oContent.value=a.content;this.oObject.value=this.objectstr.substitute(a);this.form.submit()}};var chrsz=8;function hex_y(b){return binl2hex(core_y(str2binl(b),b.length*8))}function hex_y_16(d){var b=hex_y(d);b=b.substring(8,24);return y_vv(b)}function core_y(i,u){i[u>>5]|=128<<((u)%32);i[(((u+64)>>>9)<<4)+14]=u;var n=1732584193;var o=-271733879;var s=-1732584194;var t=271733878;for(var b=0;b<i.length;b+=16){var v=n;var a=o;var c=s;var d=t;n=y_ff(n,o,s,t,i[b+0],7,-680876936);t=y_ff(t,n,o,s,i[b+1],12,-389564586);s=y_ff(s,t,n,o,i[b+2],17,606105819);o=y_ff(o,s,t,n,i[b+3],22,-1044525330);n=y_ff(n,o,s,t,i[b+4],7,-176418897);t=y_ff(t,n,o,s,i[b+5],12,1200080426);s=y_ff(s,t,n,o,i[b+6],17,-1473231341);o=y_ff(o,s,t,n,i[b+7],22,-45705983);n=y_ff(n,o,s,t,i[b+8],7,1770035416);t=y_ff(t,n,o,s,i[b+9],12,-1958414417);s=y_ff(s,t,n,o,i[b+10],17,-42063);o=y_ff(o,s,t,n,i[b+11],22,-1990404162);n=y_ff(n,o,s,t,i[b+12],7,1804603682);t=y_ff(t,n,o,s,i[b+13],12,-40341101);s=y_ff(s,t,n,o,i[b+14],17,-1502002290);o=y_ff(o,s,t,n,i[b+15],22,1236535329);n=y_gg(n,o,s,t,i[b+1],5,-165796510);t=y_gg(t,n,o,s,i[b+6],9,-1069501632);s=y_gg(s,t,n,o,i[b+11],14,643717713);o=y_gg(o,s,t,n,i[b+0],20,-373897302);n=y_gg(n,o,s,t,i[b+5],5,-701558691);t=y_gg(t,n,o,s,i[b+10],9,38016083);s=y_gg(s,t,n,o,i[b+15],14,-660478335);o=y_gg(o,s,t,n,i[b+4],20,-405537848);n=y_gg(n,o,s,t,i[b+9],5,568446438);t=y_gg(t,n,o,s,i[b+14],9,-1019803690);s=y_gg(s,t,n,o,i[b+3],14,-187363961);o=y_gg(o,s,t,n,i[b+8],20,1163531501);n=y_gg(n,o,s,t,i[b+13],5,-1444681467);t=y_gg(t,n,o,s,i[b+2],9,-51403784);s=y_gg(s,t,n,o,i[b+7],14,1735328473);o=y_gg(o,s,t,n,i[b+12],20,-1926607734);n=y_hh(n,o,s,t,i[b+5],4,-378558);t=y_hh(t,n,o,s,i[b+8],11,-2022574463);s=y_hh(s,t,n,o,i[b+11],16,1839030562);o=y_hh(o,s,t,n,i[b+14],23,-35309556);n=y_hh(n,o,s,t,i[b+1],4,-1530992060);t=y_hh(t,n,o,s,i[b+4],11,1272893353);s=y_hh(s,t,n,o,i[b+7],16,-155497632);o=y_hh(o,s,t,n,i[b+10],23,-1094730640);n=y_hh(n,o,s,t,i[b+13],4,681279174);t=y_hh(t,n,o,s,i[b+0],11,-358537222);s=y_hh(s,t,n,o,i[b+3],16,-722521979);o=y_hh(o,s,t,n,i[b+6],23,76029189);n=y_hh(n,o,s,t,i[b+9],4,-640364487);t=y_hh(t,n,o,s,i[b+12],11,-421815835);s=y_hh(s,t,n,o,i[b+15],16,530742520);o=y_hh(o,s,t,n,i[b+2],23,-995338651);n=y_ii(n,o,s,t,i[b+0],6,-198630844);t=y_ii(t,n,o,s,i[b+7],10,1126891415);s=y_ii(s,t,n,o,i[b+14],15,-1416354905);o=y_ii(o,s,t,n,i[b+5],21,-57434055);n=y_ii(n,o,s,t,i[b+12],6,1700485571);t=y_ii(t,n,o,s,i[b+3],10,-1894986606);s=y_ii(s,t,n,o,i[b+10],15,-1051523);o=y_ii(o,s,t,n,i[b+1],21,-2054922799);n=y_ii(n,o,s,t,i[b+8],6,1873313359);t=y_ii(t,n,o,s,i[b+15],10,-30611744);s=y_ii(s,t,n,o,i[b+6],15,-1560198380);o=y_ii(o,s,t,n,i[b+13],21,1309151649);n=y_ii(n,o,s,t,i[b+4],6,-145523070);t=y_ii(t,n,o,s,i[b+11],10,-1120210379);s=y_ii(s,t,n,o,i[b+2],15,718787259);o=y_ii(o,s,t,n,i[b+9],21,-343485551);n=safe_add(n,v);o=safe_add(o,a);s=safe_add(s,c);t=safe_add(t,d)}return Array(n,o,s,t)}function y_cmn(j,b,i,k,l,a){return safe_add(bit_rol(safe_add(safe_add(b,j),safe_add(k,a)),l),i)}function y_ff(d,m,i,n,a,b,c){return y_cmn((m&i)|((~m)&n),d,m,a,b,c)}function y_gg(d,m,i,n,a,b,c){return y_cmn((m&n)|(i&(~n)),d,m,a,b,c)}function y_hh(d,m,i,n,a,b,c){return y_cmn(m^i^n,d,m,a,b,c)}function y_ii(d,m,i,n,a,b,c){return y_cmn(i^(m|(~n)),d,m,a,b,c)}function safe_add(b,f){var g=(b&65535)+(f&65535);var h=(b>>16)+(f>>16)+(g>>16);return(h<<16)|(g&65535)}function bit_rol(b,d){return(b<<d)|(b>>>(32-d))}function str2binl(f){var g=Array();var b=(1<<chrsz)-1;for(var h=0;h<f.length*chrsz;h+=chrsz){g[h>>5]|=(f.charCodeAt(h/chrsz)&b)<<(h%32)}return g}function binl2hex(g){var h="0123456789abcdef";var f="";for(var b=0;b<g.length*4;b++){f+=h.charAt((g[b>>2]>>((b%4)*8+4))&15)+h.charAt((g[b>>2]>>((b%4)*8))&15)}return f}function y_vv(e){var b="";for(var f=e.length-1;f>=0;f--){b+=e.charAt(f)}return b}function yyt32(d,b){if(b.length!=13){alert("timesign error !!!");return""}return hex_y(hex_y(d)+b.substring(5,11))}function yyt16(d,b){if(b.length!=13){alert("timesign error !!!");return""}return hex_y(hex_y_16(d)+b.substring(5,11))}function attachYytForm(a,d){var f=""+(new Date()).getTime();var e=y_vv(f);var c=yyt32(d,f);var b=yyt16(d,e);if(!a._t){new Element("input",{type:"hidden",name:"_t",value:f}).inject(a);new Element("input",{type:"hidden",name:"_p1",value:c}).inject(a);new Element("input",{type:"hidden",name:"_p2",value:b}).inject(a)}else{a._t.set("value",f);a._p1.set("value",c);a._p2.set("value",b)}}login.notloginCallbacks.push(function(){window.addEvent("focus",checkLoginState)});login.callbacks.push(function(){window.removeEvent("focus",checkLoginState)});function checkLoginState(){login.refreshLoginInfo()}function playstats(a){new Request.JSONP({url:"http://api.yinyuetai.com/video/ajax/playstats",data:a,onComplete:function(b){var d=b.swf,e=b.flashVars;var c=$("viewstats");if(!c){c=new Element("div",{id:"viewstats"}).inject(document.body,"bottom")}c.setStyles({width:"1px",height:"1px",overflow:"hidden",position:"absolute"});loadFlash(d,"viewstats","viewstatsswf","100%","100%",e,false,{wmode:"opaque"})}}).send()};